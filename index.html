<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Advanced Stopwatch & Timer with Pomodoro, Analytics, and Voice Control">
    <meta name="theme-color" content="#4361ee">
    <title>TimeMaster - Advanced Stopwatch & Timer</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="TimeMaster">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>
    
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <h1 class="nav-logo">TimeMaster</h1>
            <div class="nav-buttons">
                <button id="voiceControlBtn" class="icon-button" title="Voice Control">
                    <i class="fas fa-microphone"></i>
                </button>
                <button id="darkModeToggle" class="icon-button" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="themeToggle" class="icon-button" title="Customize Theme">
                    <i class="fas fa-palette"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Tabs -->
        <div class="tabs">
            <button id="stopwatchTab" class="tab active">Stopwatch</button>
            <button id="timerTab" class="tab">Timer</button>
            <button id="pomodoroTab" class="tab">Pomodoro</button>
            <button id="analyticsTab" class="tab">Analytics</button>
        </div>

        <!-- Stopwatch Section -->
        <section id="stopwatchSection" class="timer-section active">
            <div class="timer-display floating">
                <div class="time" id="stopwatchDisplay">00:00:00<span class="milliseconds">.00</span></div>
            </div>
            
            <div class="controls">
                <button id="startStopBtn" class="control-btn primary ripple">
                    <i class="fas fa-play"></i> Start
                </button>
                <button id="resetBtn" class="control-btn secondary ripple">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button id="lapBtn" class="control-btn accent ripple">
                    <i class="fas fa-flag"></i> Lap
                </button>
                <button id="splitBtn" class="control-btn accent ripple">
                    <i class="fas fa-cut"></i> Split
                </button>
            </div>

            <div class="laps-container">
                <div class="laps-header">
                    <h3>Laps & Splits</h3>
                    <div class="laps-controls">
                        <button id="clearLapsBtn" class="icon-button small" title="Clear All Laps">
                            <i class="fas fa-trash"></i>
                        </button>
                        <button id="exportLapsBtn" class="icon-button small" title="Export Laps">
                            <i class="fas fa-file-export"></i>
                        </button>
                    </div>
                </div>
                <ul id="lapsList" class="laps-list smooth-scroll"></ul>
            </div>
        </section>

        <!-- Timer Section -->
        <section id="timerSection" class="timer-section">
            <div class="timer-presets">
                <h3>Quick Presets</h3>
                <div class="preset-buttons">
                    <button class="preset-btn" data-seconds="60">1 min</button>
                    <button class="preset-btn" data-seconds="300">5 min</button>
                    <button class="preset-btn" data-seconds="600">10 min</button>
                    <button class="preset-btn" data-seconds="900">15 min</button>
                    <button class="preset-btn" data-seconds="1800">30 min</button>
                </div>
            </div>
            
            <div class="timer-inputs">
                <div class="input-group">
                    <label for="hours">Hours</label>
                    <input type="number" id="hours" min="0" max="23" value="0">
                </div>
                <div class="input-group">
                    <label for="minutes">Minutes</label>
                    <input type="number" id="minutes" min="0" max="59" value="0">
                </div>
                <div class="input-group">
                    <label for="seconds">Seconds</label>
                    <input type="number" id="seconds" min="0" max="59" value="0">
                </div>
            </div>

            <div class="timer-display floating">
                <div class="progress-ring">
                    <svg viewBox="0 0 120 120">
                        <circle class="progress-ring-bg" cx="60" cy="60" r="54"></circle>
                        <circle class="progress-ring-circle" id="progressRing" cx="60" cy="60" r="54"></circle>
                    </svg>
                    <div class="time" id="timerDisplay">00:00:00</div>
                </div>
            </div>
            
            <div class="timer-options">
                <div class="option-group">
                    <label for="volumeControl">Volume:</label>
                    <input type="range" id="volumeControl" min="0" max="100" value="50">
                </div>
                <div class="option-group">
                    <input type="checkbox" id="loopTimer">
                    <label for="loopTimer">Loop Timer</label>
                </div>
            </div>

            <div class="controls">
                <button id="timerStartStopBtn" class="control-btn primary ripple">
                    <i class="fas fa-play"></i> Start
                </button>
                <button id="timerResetBtn" class="control-btn secondary ripple">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>

            <div id="timerEndMessage" class="timer-end-message">
                <h2>Time's Up!</h2>
            </div>
        </section>

        <!-- Pomodoro Section -->
        <section id="pomodoroSection" class="timer-section">
            <div class="pomodoro-header">
                <h2>Pomodoro Technique</h2>
                <div class="pomodoro-status" id="pomodoroStatus">Work Session</div>
            </div>
            
            <div class="timer-display floating">
                <div class="progress-ring">
                    <svg viewBox="0 0 120 120">
                        <circle class="progress-ring-bg" cx="60" cy="60" r="54"></circle>
                        <circle class="progress-ring-circle" id="pomodoroProgressRing" cx="60" cy="60" r="54"></circle>
                    </svg>
                    <div class="time" id="pomodoroDisplay">25:00</div>
                </div>
            </div>
            
            <div class="pomodoro-settings">
                <div class="setting-group">
                    <label>Work Duration (min):</label>
                    <input type="number" id="workDuration" min="1" max="60" value="25">
                </div>
                <div class="setting-group">
                    <label>Break Duration (min):</label>
                    <input type="number" id="breakDuration" min="1" max="30" value="5">
                </div>
                <div class="setting-group">
                    <label>Long Break (min):</label>
                    <input type="number" id="longBreakDuration" min="1" max="60" value="15">
                </div>
            </div>
            
            <div class="controls">
                <button id="pomodoroStartStopBtn" class="control-btn primary ripple">
                    <i class="fas fa-play"></i> Start
                </button>
                <button id="pomodoroResetBtn" class="control-btn secondary ripple">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button id="pomodoroSkipBtn" class="control-btn accent ripple">
                    <i class="fas fa-step-forward"></i> Skip
                </button>
            </div>
            
            <div class="pomodoro-stats">
                <div class="stat-card">
                    <div class="stat-value" id="sessionsCompleted">0</div>
                    <div class="stat-label">Sessions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="breaksTaken">0</div>
                    <div class="stat-label">Breaks</div>
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analyticsSection" class="timer-section">
            <h2>Timing Analytics</h2>
            <div class="analytics-container">
                <div class="chart-container">
                    <canvas id="lapChart"></canvas>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalTimeTracked">00:00:00</div>
                        <div class="stat-label">Total Time</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avgLapTime">00:00.00</div>
                        <div class="stat-label">Avg Lap</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="fastestLap">00:00.00</div>
                        <div class="stat-label">Fastest Lap</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="sessionCount">0</div>
                        <div class="stat-label">Sessions</div>
                    </div>
                </div>
                <div class="prediction-section">
                    <h3>Time Prediction</h3>
                    <div class="prediction-result" id="predictionResult">
                        Based on your history, your next session might last: <span id="predictedTime">--:--</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <p>&copy; 2025 TimeMaster | Final Year Project</p>
            <div class="social-links">
                <a href="#" class="social-link" title="Twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" class="social-link" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-link" title="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-link" title="GitHub"><i class="fab fa-github"></i></a>
            </div>
            <button id="backToTop" class="back-to-top" title="Back to Top">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>
    </footer>

    <!-- Audio element for alarm sound -->
    <audio id="alarmSound" preload="auto">
        <source src="alarm.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas"></canvas>

    <!-- Speech Recognition Status -->
    <div id="speechStatus" class="speech-status">
        <i class="fas fa-microphone"></i>
        <span id="speechText">Listening...</span>
    </div>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="script.js"></script>
</body>
</html>